@use 'variables' as v;
@use 'sass:map';
// ============================================================================
// Adds smooth transitions with optional motion-reduction support
// Usage: @include transition(opacity, 0.3s, ease-in-out);
// ============================================================================
@mixin transition($property: all, $time: 0.3s, $func: ease) {
  transition: $property $time $func;

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// ============================================================================
// Handles responsive queries dynamically (Mobile First)
// Usage: @include breakpoint('md') { ... }
// ============================================================================
@mixin breakpoint($bp) {
  @if map.has-key(v.$grid-breakpoints, $bp) {
    $value: map.get(v.$grid-breakpoints, $bp);

    @media screen and (min-width: $value) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$bp}. Use one of these: #{map.keys(v.$grid-breakpoints)}";
  }
}

// ============================================================================
// Truncates text after a specific number of lines
// Usage: @include ellipsis(2);
// ============================================================================
@mixin ellipsis($lines: 1) {
  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: $lines;
  @if $lines == 1 {
    white-space: nowrap;
  }
}

@mixin font-face($family, $folder, $file, $weight, $style: normal) {
  @font-face {
    font-style: $style;
    font-weight: $weight;
    src: url('./../../fonts/#{$folder}/#{$file}.woff2') format('woff2');
    font-family: $family;
    font-display: swap;
  }
}

@mixin font($type: 'main', $weight: 400) {
  @if $type == 'main' {
    font-family: var(--font-main);
  } @else if $type == 'secondary' {
    font-family: var(--font-secondary);
  } @else if $type == 'fancy' {
    font-family: var(--font-fancy);
  } @else {
    @error "Unknown font type: #{$type}";
  }
  font-weight: $weight;
}

@mixin bg-cover {
  display: inline-block;
  position: absolute;
  z-index: -1;
  inset: 0;
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  width: 100%;
  height: 100%;
  content: '';
}

@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

@mixin scrollbar {
  &::-webkit-scrollbar {
    width: 7px;
    height: 7px;
  }

  &::-webkit-scrollbar-track {
    box-shadow: inset 0 0 5px var(--brand-primary);
  }

  &::-webkit-scrollbar-thumb {
    background: var(--brand-primary);
  }
}

@mixin scrollbar-hide {
  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

@mixin focus-ring($color: var(--brand-primary)) {
  transition:
    box-shadow 0.2s ease-in-out,
    border-color 0.2s ease-in-out;
  outline: 2px solid transparent;
  box-shadow:
    0 0 0 2px var(--bg-surface),
    0 0 0 4px color-mix(in srgb, $color, transparent 40%);
  border: 1px solid $color;
}
